# 9-2. 추상 클래스 - 템플릿 메소드

## 추상 클래스와 템플릿 메소드

- 템플릿 메소드 : 디자인 패턴 중 하나로 추상 클래스를 사용하여 구현할 수 있습니다.

```java
package TemplateMethod;

public abstract class Car {
  //차종에 따라 달라지는 부분
    public abstract void drive();
    public abstract void stop();

  //모든 차종이 똑같이 움직이는 부분
    public void startCar(){
        System.out.println("시동을 켭니다.");
    }

    public void turnOff(){
        System.out.println("시동을 끕니다.");
    }

    //템플릿 메소드
  	//차가 달리는 방법을 순서대로 구현. 모든 자동차가 이 순서대로 동일하게 구현
    final public void run(){
        startCar();
        drive();
        stop();
        turnOff();
    }
}

//=====================================
package TemplateMethod;

/**
 * 인공지능 자동차
 */
public class AICar extends Car{

    @Override
    public void drive() {
        System.out.println("자율 주행합니다.");
        System.out.println("자동차가 알아서 방향을 전환합니다..");
    }

    @Override
    public void stop() {
        System.out.println("스스로 멈춥니다.");
    }
}
//=====================================
package TemplateMethod;

/**
 * 일반 자동차
 */
public class ManualCar extends Car{

    @Override
    public void drive() {
        System.out.println("사람이 운전합니다.");
        System.out.println("사람이 핸들을 조작합니다.");
    }

    @Override
    public void stop() {
        System.out.println("브레이크로 정지합니다.");
    }
}
//=====================================

package TemplateMethod;

public class CarTest {
    public static void main(String[] args) {
        System.out.println("=== 자율 주행하는 자동차 ====");
        Car myCar = new AICar();
        myCar.run();

        System.out.println("=== 사람이 운전하는 자동차 ===");
        Car hisCar = new ManualCar();
        hisCar.run();
    }
}
/*
=== 자율 주행하는 자동차 ====
시동을 켭니다.
자율 주행합니다.
자동차가 알아서 방향을 전환합니다..
스스로 멈춥니다.
시동을 끕니다.
=== 사람이 운전하는 자동차 ===
시동을 켭니다.
사람이 운전합니다.
사람이 핸들을 조작합니다.
브레이크로 정지합니다.
시동을 끕니다.
*/
```

### 템플릿 메소드의 역할

- 메소드의 실행 순서와 시나리오를 정의하는 것입니다.
  - 일반적으로 변하지 않는 시나리오(ex. 차가 달리기 위해서는 시동을 켜고, 달리고, 멈추고, 시동을 끄는 행위)
- 템플릿 메소드에서 호출하는 메소드가 추상 메소드라면 차종에 따라 구현 내용이 바뀔 수 있습니다.
- **하위 클래스에서 템플릿 메소드를 재정의(오버라이딩)하면 안된다.**
  - 따라서 final로 재정의를 방지한다.

## 나 혼자 코딩

```java
public abstract class Car {
    abstract void drive();
    abstract void stop();
    abstract void wiper();

    public void startCar(){
        System.out.println("시동을 켭니다.");
    };

    public void turnOff(){
        System.out.println("시동을 끕니다.");
    }

    //템플릿 메소드
    final public void run(){
        startCar();
        drive();
        wiper();
        stop();
        turnOff();
    }
}
//======================================
package TemplateMethod.SelfCoding;

/**
 * 인공지능 자동차
 */
public class AICar extends Car {

    @Override
    public void drive() {
        System.out.println("자율 주행합니다.");
        System.out.println("자동차가 알아서 방향을 전환합니다..");
    }

    @Override
    public void stop() {
        System.out.println("스스로 멈춥니다.");
    }

    @Override
    void wiper() {
        System.out.println("비나 눈의 양에 따라 빠르기가 자동으로 조절됩니다.");
    }
}
//======================================
package TemplateMethod.SelfCoding;

/**
 * 일반 자동차
 */
public class ManualCar extends Car {

    @Override
    public void drive() {
        System.out.println("사람이 운전합니다.");
        System.out.println("사람이 핸들을 조작합니다.");
    }

    @Override
    public void stop() {
        System.out.println("브레이크로 정지합니다.");
    }

    @Override
    void wiper() {
        System.out.println("사람이 빠르기를 조절합니다.");
    }
}
//======================================
package TemplateMethod.SelfCoding;


public class CarTest {
    public static void main(String[] args) {
        System.out.println("=== 자율 주행하는 자동차 ====");
        Car myCar = new AICar();
        myCar.run();

        System.out.println("=== 사람이 운전하는 자동차 ===");
        Car hisCar = new ManualCar();
        hisCar.run();
    }
}
```

## 템플릿 메소드 응용하기

> 예제 시나리오
>
> Player가 있고, 레벨에 따라 할 수 있는 세가지 기능이 있다.
>
> run(), jump(), turn()
>
> 초보자 레벨 : 천천히 run
>
> 중급자  레벨 : 빠르게 run, jump
>
> 고급자 레벨 : 엄청 빠르게 run, jump, turn
>
> 모든 레벨에서 필사기인 go(int count) 제공
>
> go메소드는 한 번 run하고, 매개 변수로 전달된 count 만큼 jump하고, 한 번 turn한다.
>
> 그 레벨에서 불가능한 기능을 요청하면 요청 할 수 없다고 출력한다.

```java
package TemplateMethod.player;

public abstract class PlayerLevel {

    public abstract void run();
    public abstract void jump();
    public abstract void turn();
    public abstract void showLevelMessage();

    final public void go(int count){
        run();
        for (int i = 0; i < count; i++) {
            jump();
        }
        turn();
    }
}
//======================================================
package TemplateMethod.player;


public class Player {
    private PlayerLevel level;

    //디폴트 생성자. 처음 생성되면 초급자 레벨로 시작하며, 레벨 메시지를 출력한다.
    public Player(){
        level = new Beginner();
        level.showLevelMessage();
    }

    public PlayerLevel getLevel(){
        return level;
    }

    public void upgradeLevel(PlayerLevel level){
        this.level = level;
        level.showLevelMessage();
    }

    public void play(int count){
        //템플릿 메소드 호출
        level.go(count);
    }
}
//======================================================
package TemplateMethod.player;

/**
 * 초급자 레벨
 */
public class Beginner extends PlayerLevel {

    @Override
    public void run() {
        System.out.println("천천히 달립니다.");
    }

    @Override
    public void jump() {
        System.out.println("jump 할 줄 모르지롱");
    }

    @Override
    public void turn() {
        System.out.println("turn 할 줄 모르지롱");
    }

    @Override
    public void showLevelMessage() {
        System.out.println("초보자 레벨 입니다.");
    }
}
//======================================================
package TemplateMethod.player;


/**
 * 중급자
 */
public class Advanced extends PlayerLevel {

    @Override
    public void run() {
        System.out.println("빨리 달립니다.");
    }

    @Override
    public void jump() {
        System.out.println("높이 jump 합니다.");
    }

    @Override
    public void turn() {
        System.out.println("turn 할 줄 모르지롱");
    }

    @Override
    public void showLevelMessage() {
        System.out.println("중급자 레벨입니다.");
    }
}
//======================================================
package TemplateMethod.player;

/**
 * 고급자 레벨
 */
public class Expert extends PlayerLevel {
    @Override
    public void run() {
        System.out.println("아주 빨리 달립니다.");
    }

    @Override
    public void jump() {
        System.out.println("아주 높이 jump 합니다.");
    }

    @Override
    public void turn() {
        System.out.println("한 바퀴 돕니다.");
    }

    @Override
    public void showLevelMessage() {
        System.out.println("고급자 레벨입니다.");
    }
}
//======================================================
package TemplateMethod.player;

public class PlayerTest {
    public static void main(String[] args) {
        Player player = new Player();
        player.play(1);

        Advanced a = new Advanced();
        player.upgradeLevel(a);
        player.play(2);

        Expert e = new Expert();
        player.upgradeLevel(e);
        player.play(3);
    }
}

```



