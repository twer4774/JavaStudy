# 8-5. 상속과 다형성 - 다형성 활용

- 배열과 함께 상속과 다형성 활용

## 일반 고객과 VIP 고객의 중간 등급 만들기

> 예제 시나리오
>
> GOLD 등급 추가
>
> 혜택 : 10%할인, 포인트 2% 적립, 담당 상담원은 없음

```java
package Polymorphism;

public class GoldCustomer extends Customer {

    double saleRatio;

    public GoldCustomer(int customerID, String customerName){
        super(customerID, customerName);
        customerGrade = "GOLD";
        bonusRatio = 0.02;
        saleRatio = 0.1;
    }

    @Override
    public int calcPrice(int price){
        bonusPoint += price * bonusRatio;
        return price - (int) (price * saleRatio);
    }
}
```

- 배열로 고객 5명 구현하기

  > 예제 시나리오
  >
  > 이 회사의 고객은 현재 5명
  >
  > VIP 1, GOLD 2, SILVER 2
  >
  > 이 고객들이 각각 10,000원 짜리 상품을 구매했을 때의 결과를 출력

```java
package   Polymorphism;

import java.util.ArrayList;

public class CustomerTest {

    public static void main(String[] args) {

        ArrayList<Customer> customerArrayList = new ArrayList<>();

        Customer customerLee = new Customer(10010, "이순신");
        Customer customerShin = new Customer(10020, "신사임당");
        Customer customerHong = new GoldCustomer(10030, "홍길동");
        Customer customerYoul = new GoldCustomer(10040, "이율곡");
        Customer customerKim = new VIPCustomer(10050, "김유신", 1234);

        customerArrayList.add(customerLee);
        customerArrayList.add(customerShin);
        customerArrayList.add(customerHong);
        customerArrayList.add(customerYoul);
        customerArrayList.add(customerKim);

        System.out.println("========= 고객 정보 출력 ==========");
        for (Customer customer : customerArrayList) {
            System.out.println(customer.showCustomerInfo());
        }

        System.out.println("========== 할인율과 보너스 포인트 계산 ==========");
        int price = 10000;
        for (Customer customer : customerArrayList) {
            int cost = customer.calcPrice(price);

            System.out.println(customer.getCustomerName() + " 님이 " + cost + "원 지불하셨습니다.");
            System.out.println(customer.getCustomerName() + " 님의 현재 보너스 포인트는 " + customer.bonusPoint + "점 입니다.");
        }
    }

}

/*
========= 고객 정보 출력 ==========
이순신 님의 등급은 SILVER이며, 보너스 포인트는 0입니다.
신사임당 님의 등급은 SILVER이며, 보너스 포인트는 0입니다.
홍길동 님의 등급은 GOLD이며, 보너스 포인트는 0입니다.
이율곡 님의 등급은 GOLD이며, 보너스 포인트는 0입니다.
김유신 님의 등급은 VIP이며, 보너스 포인트는 0입니다.
========== 할인율과 보너스 포인트 계산 ==========
이순신 님이 10000원 지불하셨습니다.
이순신 님의 현재 보너스 포인트는 100점 입니다.
신사임당 님이 10000원 지불하셨습니다.
신사임당 님의 현재 보너스 포인트는 100점 입니다.
홍길동 님이 9000원 지불하셨습니다.
홍길동 님의 현재 보너스 포인트는 200점 입니다.
이율곡 님이 9000원 지불하셨습니다.
이율곡 님의 현재 보너스 포인트는 200점 입니다.
김유신 님이 9000원 지불하셨습니다.
김유신 님의 현재 보너스 포인트는 500점 입니다.
*/
```

## 상속은 언제 사용할까?

- 기존의 코드를 수정하지 않고, 새로운 클래스를 추가하여 새로운 기능을 만들 때 사용합니다.
  - 확장성과 유지보수에 좋습니다.
- 항상 사용하는 것이 좋을까?
  - NO
  - IS-A(is a relationship) 관계일 때 사용
    - 일반 클래스를 구체화 하는 상황속에서 상속 사용
  - 상위 클래스형에 종속되기 때문에 이질적인 클래스 간에는 종속하지 않는 것이 좋습니다.

- Has-A(Has a relationship) 관계 

  - 한 클래스가 다른 클래스를 소유한 관계
  - ex) Subject(과목)과 Student(학생)은 Sutdent가 Subejct를 가지고 있는 Has-A 관계

  ```java
  class Sutdent{
    Subject majorSubject;
  }
  ```

- 상속의 단점

  - 클래스 간의 결합도가 높아져 상위 클래스의 변화가 하위 클래스에 미치는 영향이 큽니다.

=> 상속은 일반적인 클래스와 구체적인 클래스의 관계에서 구현하는 것(Is-A 와 Has-A를 구분하여 상속여부를 판단합니다.)

=> 자바는 다중 상속을 지원하지않습니다.(수직적인 확장)

=> 수평적인 확장을 위해 interface를 이용합니다.