# 8-4. 상속과 다형성 - 다형성

- 하나의 코드가 여러 자료형으로 구현되어 실행되는 것을 말합니다.
- 다형성은 추상 클래스, 인터페이스에서 구현됩니다.
- 아래의 move 메소드에 각 @Override를 명시해주는것이 좋은 습관입니다.

```java
class Animal{
    public void move(){
        System.out.println("동물이 움직입니다.");
    }
}


class Human extends Animal{
    public void move(){
        System.out.println("사람이 두 발로 걷습니다.");
    }
}

class Tiger extends Animal{
    public void move(){
        System.out.println("호랑이가 네 발로 뜁니다.");
    }
}

class Eagle extends Animal{
    public void move(){
        System.out.println("독수리가 하늘을 납니다.");
    }
}

public class AnimalTest {
    public static void main(String[] args) {
        AnimalTest aTest = new AnimalTest();

        aTest.moveAnimal(new Human());
        aTest.moveAnimal(new Tiger());
        aTest.moveAnimal(new Eagle());
    }

  //어떤 매개변수가 전달되느냐에 따라 출력문이 달라진다
    private void moveAnimal(Animal animal) {
        animal.move();
    }
}

/*
사람이 두 발로 걷습니다.
호랑이가 네 발로 뜁니다.
독수리가 하늘을 납니다.
*/
```

## 다형성의 장점

- 확장성과 유지보수
  - 상위 클래스에서 공통 부분의 메소드를 제공
  - 하위 클래스에서는 추가 요소를 덧 붙여 구현하면 코드의 양이 줄어들고, 유지보수도 편리해 짐
  - 상속 받은 모든 클래스를 하나의 상위 클래스로 처리할 수 있음

### 다형성을 활용해 VIP 고객 클래스 완성하기

```java
package Polymorphism;

public class Customer {

    protected int customerID; //고객 아이디
    protected String customerName; //고객 이름
    protected String customerGrade; //고객 등급
    int bonusPoint; //보너스 포인트
    double bonusRatio; //적립 비율

    public Customer() {
        initCustomer();
    }

    //매개변수가 있는 생성자
    public Customer(int customerID, String customerName){
        this.customerID = customerID;
        this.customerName = customerName;
        customerGrade = "SILVER";
        bonusRatio = 0.01;
        initCustomer();
    }

    //고객 등급과 보너스 포인트 적립률 지정 함수
    private void initCustomer() {
        customerGrade = "SILVER";
        bonusRatio = 0.01;
    }

    //보너스 포인트 적립, 지불 가격 계산 메소드
    public int calcPrice(int price){
        bonusPoint += price * bonusRatio; //보너스 포인트 계산
        return price;
    }

    public String showCustomerInfo(){
        return customerName + " 님의 등급은 " + customerGrade + "이며, 보너스 포인트는 " + bonusPoint + "입니다.";
    }

    public int getCustomerID() {
        return customerID;
    }

    public String getCustomerName() {
        return customerName;
    }

    public String getCustomerGrade() {
        return customerGrade;
    }

    public void setCustomerGrade(String customerGrade) {
        this.customerGrade = customerGrade;
    }
}

```

```java
package Polymorphism;

public class VIPCustomer extends Customer {

    private int agentID; //VIP 고객 담당 상담원 아이디
    double saleRatio; //할인율

    public VIPCustomer(int customerID, String customerName, int agentID){
        //상위 클래스 생성자 호출
        super(customerID, customerName);
        customerGrade = "VIP"; //고객 등급 VIP
        bonusRatio = 0.05; //보너스 적립 5%
        saleRatio = 0.1; //할인율 10%
        this.agentID = agentID;
    }

    //VIP 고객에게만 필요한 메소드
    public int getAgentID(){
        return agentID;
    }

    //메소드 오버라이딩
    @Override
    public int calcPrice(int price) {
        bonusPoint += price * bonusRatio; //포인트 적립
        return price - (int)(price * saleRatio); //할인된 가격을 계산하여 반환
    }

    @Override
    public String showCustomerInfo(){
        return super.showCustomerInfo() + "담당 상담원 번호는 " + agentID + "입니다.";
    }

}
```

```java
public class CustomerTest {

    public static void main(String[] args) {
        Customer customerLee = new Customer();
        customerLee.setCustomerID(10010);
        customerLee.setCustomerName("이순신");
        customerLee.bonusPoint = 1000;

        VIPCustomer customerKim = new VIPCustomer(10020, "김유신", 90001);
        customerKim.bonusPoint = 1000;

        System.out.println(customerKim.showCustomerInfo());
        System.out.println("========== 할인율과 보너스 포인트 계산 =========");

        int price = 10000;
        int leePrice = customerLee.calcPrice(price);
        int kimPrice = customerKim.calcPrice(price);

        System.out.println(customerLee.getCustomerName() + " 님이 " + leePrice + "원 지불하였습니다." );
        System.out.println(customerLee.showCustomerInfo());
        System.out.println(customerKim.getCustomerName() + " 님이 " + kimPrice + "원 지불하였습니다." );
        System.out.println(customerKim.showCustomerInfo());

    }

}
/*
김유신 님의 등급은 VIP이며, 보너스 포인트는 1000입니다.담당 상담원 번호는 90001입니다.
========== 할인율과 보너스 포인트 계산 =========
이순신 님이 10000원 지불하였습니다.
이순신 님의 등급은 SILVER이며, 보너스 포인트는 1100입니다.
김유신 님이 9000원 지불하였습니다.
김유신 님의 등급은 VIP이며, 보너스 포인트는 1500입니다.담당 상담원 번호는 90001입니다.
*/
```