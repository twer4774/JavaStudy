# 11-1. 기본 클래스 - Object 클래스

## java.lang 패키지

- 기본적으로 많이 사용하는 클래스들을 포함합니다.
  - String, Integer 등
- 컴파일러가 자동으로 import java.lang.*를 추가하므로 따로 명시하지 않아도 됩니다.

## 모든 클래스의 최상위 클래스 Object

- Object의 메소드

| 메소드                     | 설명                                                         |
| -------------------------- | ------------------------------------------------------------ |
| String toString()          | 객체를 문자열로 표현하여 반환                                |
| boolean equals(Object obj) | 두 인스턴스의 동일여부 판별                                  |
| int hashCode()             | 객체의 해시 코드 값 반환                                     |
| Object clone()             | 객체를 복제하여 동일한 멤버 변수 값을 가진 새로운 인스턴스 생성 |
| Class getClass()           | 객체의 Class 반환                                            |
| void finalize()            | 인스턴스가 힙 메모리에서 제거될 때 GC에 의해 호출되는 메소드. 네트워크 연결 해제, 파일 스트림 해제 등을 구현 |
| void wait()                | 멀티 쓰레드 프로그램에서 대기 상태로 만듦                    |
| void notify()              | wait() 메소드에 의해 기다리고 있는 쓰레드를 실행 가능한 상태로 가져옴 |

### toString() 메소드

- 객체 정보를 문자열로 바꾸어 줍니다.

- 모든 클래스에서 toString()을 재정의할 수 있습니다.

  - Object에 정의된 toString()을 실행하면, 해시코드 값이 출력됩니다.

  - String, Integer 클래스에서는 toString()을 재정의하고 있어서 String, Integer로 인스턴스를 만든 후 실행하면 해당 반환 타입에 맞는 값이 출력됩니다.

    ```java
    String str = new String("test");
    System.out.println(str);
    ```

- toString의 재정의

```java
package Object.toString;

class Book{
    int bookNumber;
    String bookTitle;

    public Book(int bookNumber, String bookTitle) {
        this.bookNumber = bookNumber;
        this.bookTitle = bookTitle;
    }

    @Override
    public String toString(){
        return bookTitle + "," + bookNumber;
    }
}

public class toStringEx {
    public static void main(String[] args) {
        Book book1 = new Book(200, "개미");

        System.out.println(book1);
        System.out.println(book1.toString());
    }
}
```

### equals() 메소드

- 두 인스턴스의 주소 값을 비교하여 반환합니다.

- Object 클래스의 equals() 메소드

  - 두 인스턴스가 같다 = 인스턴스를 가리키는 참조 변수가 두 개 있을 때 같은 메모리 주소를 가리킨다.

  ```java
  Student studentLee = new Student(100, "이상원");
  Student studentLee2 = studentLee; //주소 복사
  ```

```java
package Object.equals;

class Student{
    int studentId;
    String studentName;

    public Student(int studentId, String studentName) {
        this.studentId = studentId;
        this.studentName = studentName;
    }
    
    public String toString(){
        return studentId + "," + studentName;
    }
}

public class EqualsTest {
    public static void main(String[] args) {
        Student studentLee = new Student(100, "이상원");
        Student studentLee2 = studentLee;
        Student studentSang = new Student(100, "이상원");

        if (studentLee == studentLee2) {
            System.out.println("둘의 주소는 같습니다.");
        } else {
            System.out.println("둘의 주소는 다릅니다.");
        }

        if (studentLee.equals(studentLee2)) {
            System.out.println("둘은 같습니다.");
        } else {
            System.out.println("둘은 다릅니다.");
        }

        if (studentLee == studentSang) {
            System.out.println("둘의 주소는 같습니다.");
        } else {
            System.out.println("둘의 주소는 다릅니다.");
        }

        if (studentLee.equals(studentSang)) {
            System.out.println("둘은 같습니다.");
        } else {
            System.out.println("둘은 다릅니다.");
        }
                
    }
}
/*
둘의 주소는 같습니다.
둘은 같습니다.
둘의 주소는 다릅니다.
둘은 다릅니다.
*/
```

## 나 혼자 코딩

- 날짜가 같으면 sout(date1.equals(date2)); 의 출력 결과 값이 true가 되도록 재정의

```java
package Object.equals.SelfCoding;

/**
 * 날짜가 같으면
 * System.out.println(date1.equals(date2)));의 출력 결과 값이 true가 되도록 재정의
 */


class MyDate{
    int day;
    int month;
    int year;

    public MyDate(int day, int month, int year) {
        this.day = day;
        this.month = month;
        this.year = year;
    }

    @Override
    public boolean equals(Object obj) {
        if(obj instanceof MyDate){
            MyDate myDate = (MyDate) obj;
            if(this.day == myDate.day && this.month == myDate.month && this.year == myDate.year){
                return true;
            }
        }
        return false;
    }
}

public class MyDateTest {
    public static void main(String[] args) {
        MyDate date1 = new MyDate(9, 18, 2004);
        MyDate date2 = new MyDate(9, 18, 2004);
        System.out.println(date1.equals(date2));
    }
}
/*
true
*/
```

### hashCode() 메소드

- 해시는 정보를 저장하거나 검색할 때 사용하는 자료구조입니다.
- 객체의 특정 정보를 매개변수 값으로 넣으면 그 객체가 저장되어야 할 위치나 저장된 해시 테이블 주소를 반환합니다.
  - 객체 정보를 알면 해당 객체의 위치를 빠르게 검색할 수 있습니다.
- 자바에서는 인스턴스를 힙 메모리에 생성하여 관리할 때 해시 알고리즘을 사용합니다.
- **euqals()를 재정의했다면, hashCode()도 재정의해야합니다.**

```java
package Object.hashCode;

class Student{
    int studentId;
    String studentName;

    public Student(int studentId, String studentName) {
        this.studentId = studentId;
        this.studentName = studentName;
    }

    @Override
    public String toString(){
        return studentId + "," + studentName;
    }

    //해시 코드 값으로 학번 반환
    @Override
    public int hashCode() {
        return studentId;
    }
}

public class HashCodeTest {

    public static void main(String[] args) {
        Student studentLee = new Student(100, "이상원");
        Student studentLee2 = studentLee;
        Student studentSang = new Student(100, "이상원");


        System.out.println("studentLee의 hashCode : " + studentLee.hashCode() );
        System.out.println("studentSang의 hashCode : " + studentSang.hashCode() );

        System.out.println("studentLee의 실제 주소 값: " + System.identityHashCode(studentLee));
        System.out.println("studentLee의 실제 주소 값: " + System.identityHashCode(studentSang));

    }

}
/* 두 학생은 논리적으로 같기 때문에 같은 해시 코드 값을 반환합니다.
studentLee의 hashCode : 100
studentSang의 hashCode : 100
studentLee의 실제 주소 값: 434091818
studentLee의 실제 주소 값: 398887205
*/
```

### clone() 메소드

- 객체 원본을 유지해 놓고 복사본을 사용하거나 기본 틀의 복사본을 사용해 동일한 인스턴스를 만들어 복잡한 생성 과정을 간단히 하려는 경우에 clone()을 사용합니다.
- 객체를 복제해도 된다는 의미로 Cloneable를 구현해야합니다.

```java
package Object.clone;

class Point {
    int x, y;

    public Point(int x, int y) {
        this.x = x;
        this.y = y;
    }

    @Override
    public String toString() {
        return "x = " + x + "," + " y = " + y;
    }
}

//Cloneable : 객체를 복제해도 된다는 의미로 선언
class Circle implements Cloneable{
    Point point;
    int radius;

    public Circle(int x, int y, int radius) {
        this.point = new Point(x, y);
        this.radius = radius;
    }

    @Override
    public String toString() {
        return "원점은 " + point + "이고, " + "반지름은 " + radius + "입니다.";
    }

    @Override
    protected Object clone() throws CloneNotSupportedException {
        return super.clone();
    }
}

public class ObjectCloneTest {
    public static void main(String[] args) throws CloneNotSupportedException {
        Circle circle = new Circle(10, 20, 30);
        Circle copyCircle = (Circle) circle.clone();

        System.out.println(circle);
        System.out.println(copyCircle);
        System.out.println(System.identityHashCode(circle));
        System.out.println(System.identityHashCode(copyCircle));
    }
}
/*
원점은 x = 10, y = 20이고, 반지름은 30입니다.
원점은 x = 10, y = 20이고, 반지름은 30입니다.
234698513
1121172875
*/
```

