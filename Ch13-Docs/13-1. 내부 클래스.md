# 13-1. 내부 클래스

- 클래스 내부에 선언한 클래스
- 내부 클래스의 구분
  - 인스턴스 내부 클래스
  - 정적(static) 내부 클래스
  - 지역(local) 내부 클래스
  - 익명(anonymous) 내부 클래스 - 이름이 없는 클래스

```java
class ABC{ //외부 클래스
  class In{ //인스턴스 내부 클래스
    static class Sin{
    }
  }
  
  public void abc{
    class Local{ //지역 내부 클래스
      
    }
  }
}
```

## 인스턴스 내부 클래스

- 인스턴스 변수를 선언할 때와 같은 위치에 선언하며, 외부 클래스 내부에서만 생성하여 사용하는 객체를 선언할 때 쓰입니다.
  - 어떤 클래스 내에 여러 변수가 있고 이들 변수 중 일부를 모아 클래스로 표현할 수 있습니다.
  - 외부 클래스를 먼저 생성하지 않고 인스턴스 내부 클래스를 사용할 수는 없습니다. (static 내부 클래스와의 차이점)

```java
package innerclass;

class OutClass{ //외부 클래스
    private int num = 10; //외부 클래스 private 변수
    private static int sNum = 20; //외부 클래스 정적 변수

    private InClass inClass; //내부 크래스 자료형 변수를 먼저 선언

    public OutClass(){
        inClass = new InClass();
    }

    class InClass{
        int inNum = 100; //내부 클래스의 인스턴스 변수

        void inTest(){
            System.out.println("OutClass num = " + num + "(외부 클래스 인스턴스 변수)");
            System.out.println("OutClass sNum = " + sNum + "(외부 클래스 정적 변수)");
        }
    } //InClass

    public void usingClass(){
        inClass.inTest();
    }
}

public class InnerTest {
    public static void main(String[] args) {
        OutClass outClass = new OutClass();
        System.out.println("외부 클래스를 이용하여 내부 클래스 기능 호출");
        //내부 클래스 기능 호출
        outClass.usingClass();
    }

}
/*
외부 클래스를 이용하여 내부 클래스 기능 호출
OutClass num = 10(외부 클래스 인스턴스 변수)
OutClass sNum = 20(외부 클래스 정적 변수)
*/
```

- 인스턴스 내부 클래스는 외부 클래스가 먼저 생성되어야 사용할 수 있습니다.
  - 인스턴스 내부 클래스의 메소드는 ㄹ외부 클래스의 메소드가 호출될 때 사용할 수 있습니다(usingClass())

## 정적 내부 클래스 static

- 내부 클래스가 외부 클래스의 생성과 무관하게 사용되어야 할 경우 static으로 정적 내부 클래스를 생성합니다.

```java
package innerclass;

class OutClassStatic{ //외부 클래스
    private int num = 10; //외부 클래스 private 변수
    private static int sNum = 20; //외부 클래스 정적 변수

    static class InStaticClass{
        int inNum = 100; //정적 내부 클래스의 인스턴스 변수
        static int sInNum = 200; //정적 내부 클래스의 정적 변수

        //정적 내부 클래스의 일반 메소드
        void inTest(){
            System.out.println("InStaticClass inNum = " + inNum + "(내부 클래스 인스턴스 변수)");
            System.out.println("InStaticClass sInNum = " + sInNum + "(내부 클래스 정적 변수)");
            System.out.println("OutClass sNum = " + sNum + "(외부 클래스 정적 변수)");
        }

        //정적 내부 클래스의 정적 메소드
        static void sTest(){
            System.out.println("OutClass sNum = " + sNum + "(외부 클래스의 정적 변수 사용)");
            System.out.println("InStaticClass sInNum = " + sInNum + "(내부 클래스의 정적 변수 사용)");
        }

    } //InStaticClass
}

public class InnerTestStatic {
    public static void main(String[] args) {
        //외부 클래스를 생성하지 않고 바로 정적 내부 클래스 생성
        OutClassStatic.InStaticClass sInClass = new OutClassStatic.InStaticClass();
        System.out.println("정적 내부 클래스 일반 메소드 호출");
        sInClass.inTest();
        System.out.println();
        System.out.println("정적 내부 클래스의 정적 메소드 호출");
        OutClassStatic.InStaticClass.sTest();
    }

}
/*
정적 내부 클래스 일반 메소드 호출
InStaticClass inNum = 100(내부 클래스 인스턴스 변수)
InStaticClass sInNum = 200(내부 클래스 정적 변수)
OutClass sNum = 20(외부 클래스 정적 변수)

정적 내부 클래스의 정적 메소드 호출
OutClass sNum = 20(외부 클래스의 정적 변수 사용)
InStaticClass sInNum = 200(내부 클래스의 정적 변수 사용)
*/
```

## 지역 내부 클래스 local

- 지역 변수 처럼메서드 내부에 클래스를 정의하여 사용하는 것을 말합니다.
  - 메서드 안에서만 사용 가능합니다.
- Runnable 인터페이스를 구현하는 클래스를 지역 내부 클래스로 만든 예제
  - 자바에서 쓰레드를 만들 때 사용하는 인터페이스로, 반드시 run()을 구현해야 한다.

```java
package innerclass;

class Outer{
    int outNum = 100;
    static int sNum = 200;

    Runnable getRunnable(int i) {
        int num = 100;

        //지역 내부 클래스
        class MyRunnalbe implements Runnable {
            //지역 내부 클래스의 인스턴스 변수
            int localNum = 10;

            @Override
            public void run(){
                System.out.println("i =" + i);
                System.out.println("num =" + num);
                System.out.println("localNum =" + localNum);
                System.out.println("outNum =" + outNum);
                System.out.println("Outer.sNum =" + Outer.sNum);
            }
        }
        return new MyRunnalbe();
    }//getRunnable()
}


public class LocalInnerTest {
    public static void main(String[] args) {
        Outer out = new Outer();
        Runnable runner = out.getRunnable(10); //메소드 호출
        runner.run();
    }
}
/*
i =10
num =100
localNum =10
outNum =100
Outer.sNum =200
*/
```

## 익명 내부 클래스 anonymous

```java
package innerclass;

class Outer2{

    Runnable getRunnable(int i) {
        int num = 100;

        return new Runnable() {
            @Override
            public void run() {
                System.out.println(i);
                System.out.println(num);
            }
        };
    }//getRunnable()

    //인터페이스나 추상 클래스형 변수를 선언하고 클래스를 생성해 대입하는 방법
    Runnable runner = new Runnable() {
        @Override
        public void run() {
            System.out.println("Runnable이 구현된 익명 클래스 변수");
            }
        };
}


public class AnonymousInnerTest {
    public static void main(String[] args) {
        Outer2 out = new Outer2();
        Runnable runner = out.getRunnable(10); //메소드 호출
        runner.run();
        out.runner.run();
    }
}
/*
10
100
Runnable이 구현된 익명 클래스 변수
*/
```

