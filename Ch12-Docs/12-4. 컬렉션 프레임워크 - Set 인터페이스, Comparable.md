# 12-4. 컬렉션 프레임워크 - Set 인터페이스, Comparable

- 순서가 없고, 중복을 허용하지 않는 자료구조
- HashSet, TreeSet 등이 존재합니다.

## HashSet 클래스

```java
public class HashSetTest {
    public static void main(String[] args) {
        HashSet<String> hashSet = new HashSet<String>();
        hashSet.add(new String("임정순"));
        hashSet.add(new String("박현정"));
        hashSet.add(new String("홍연의"));
        hashSet.add(new String("강감찬"));
        hashSet.add(new String("강감찬"));

        System.out.println(hashSet);
    }

}
/*
[홍연의, 박현정, 강감찬, 임정순]
*/
```

- HashSet를 활용해 회원 관리 프로그램 구현하기

```java
package Collection.set.hashset;

import Collection.Member;

import java.util.HashSet;
import java.util.Iterator;

public class MemberHashSet {
    private HashSet<Member> hashSet;

    public MemberHashSet() {
        this.hashSet = new HashSet<Member>();
    }

    public void addMember(Member member) {
        hashSet.add(member);
    }

    public boolean removeMember(int memberId){
        Iterator<Member> ir = hashSet.iterator();

        while (ir.hasNext()) {
            Member member = ir.next(); //회원을 하나씩 가져와서
            int tempId = member.getMemberId();

            //ir에 있는 멤버 아이디와, 파라미터로 입력된 memberId의 값 비교
            if(tempId == memberId){
                hashSet.remove(member);
                return true;
            }
        }
        System.out.println(memberId +  "가 존재하지 않습니다.");
        return false;
    }
    
    public void showAllMember(){
        for(Member member : hashSet){
            System.out.println(member);
        }
        System.out.println();
    }
}
//======================================================================
package Collection.set.hashset;

import Collection.Member;

public class MemberHashSetTest {
    public static void main(String[] args) {
        MemberHashSet memberHashSet = new MemberHashSet();

        Member memberLee = new Member(1001, "이지원");
        Member memberSon = new Member(1002, "손민국");
        Member memberPark = new Member(1003, "박서훤");

        memberHashSet.addMember(memberLee);
        memberHashSet.addMember(memberSon);
        memberHashSet.addMember(memberPark);
        memberHashSet.showAllMember();

        //아이디가 중복회원을 추가한경우 - 홍길동은 추가되지 않아야 한다. => Member 클래스 수정필요
        Member memberHong = new Member(1003, "홍길동");
        memberHashSet.addMember(memberHong);
        memberHashSet.showAllMember();
    }
}
//======================================================================
//Member객체 수정
//같은 객체를 중복 저장하지 않기 위해 필요(MemberHashSet에서 홍길동이 추가되면 안된다)
@Override
public int hashCode() {
  return memberId;
}

@Override
public boolean equals(Object obj) {
  if(obj instanceof  Member){
    Member member = (Member) obj;
    //매개변수로 받은 회원 아이디가 자신의 회원 아이디와 같다면 true 반환
    if (this.memberId == member.memberId) {
      return true;
    } else{
      return false;
    }
  }
  return false;
}
```

## TreeSet 클래스

- 자료의 중복을 허용하지 않으면서 출력 결과 값을 정렬하는 클래스입니다.
- 정렬 기준은 이진 검색트리 활용

```java
package Collection.set.treeset;

import java.util.TreeSet;

public class TreeSetTest {
    public static void main(String[] args) {
        TreeSet<String> treeSet = new TreeSet<String>();
        treeSet.add("홍길동");
        treeSet.add("이순신");
        treeSet.add("강감찬");

        for (String str : treeSet) {
            System.out.println(str);
        }
    }

}
/*
강감찬
이순신
홍길동
*/
```

### 이진 검색 트리

- 노드에 저장되는 자료의 중복을 허용하지 않습니다.
- 부모가 가지는 자식 노드의 개수는 2개 이하입니다.
- 왼쪽 자식의 값은 부모 노드보다 작고, 오른쪽 자식의 값은 부모 노드 값 보다 큽니다.
  - 비교 범위가 평균 1/2로 줄어듧니다. => 효율적인 자료검색 가능

### TreeSet를 활용해 회원 관리 프로그램 구현하기

```java
package Collection.set.treeset;

import Collection.Member;

import java.util.Iterator;
import java.util.TreeSet;

public class MemberTreeSet {
    private TreeSet<Member> treeSet;

    public MemberTreeSet(){
        treeSet = new TreeSet<Member>();
    }
    
    public void addMember(Member member){
        treeSet.add(member);
    }
    
    public boolean removeMember(int memberId){
        Iterator<Member> ir = treeSet.iterator();

        while (ir.hasNext()) {
            Member member = ir.next();
            int tempId = member.getMemberId();
            if (tempId == member.getMemberId()) {
                treeSet.remove(member);
                return true;
            }
        }
        System.out.println(memberId + "가 존재하지 않습니다.");
        return false;
    }

    
    public void showAllMember(){
        for (Member member : treeSet) {
            System.out.println(member);
        }
        System.out.println();
    }
}
//=========================================================================
package Collection.set.treeset;

import Collection.Member;

public class MemberTreeSetTest {
    public static void main(String[] args) {
        MemberTreeSet memberTreeSet = new MemberTreeSet();

        Member memberPark = new Member(1003, "박서훤");
        Member memberLee = new Member(1001, "이지원");
        Member memberSon = new Member(1002, "손민국");

        memberTreeSet.addMember(memberLee);
        memberTreeSet.addMember(memberSon);
        memberTreeSet.addMember(memberPark);
        memberTreeSet.showAllMember();

        //아이디 중복회원 추가 => Member에서 Comparable을 구현해줘야 한다.(트리는 정렬이 들어가므로, 정렬의 기준이 필요하다)
        Member memberHong = new Member(1003, "홍길동");
        memberTreeSet.addMember(memberHong);
        memberTreeSet.showAllMember();
    }
}
//=========================================================================
public class Member implements Comparable<Member>{
  ...
    //추가한 회원 아이디와 매개변수로 받은 회원아이디를 비교한다. => 오름차순정렬
    @Override
    public int compareTo(Member member) {
        return(this.memberId - member.memberId); //내림차순 정렬 return(this.memberId - member.memberId) * (-1);
  	}	
}
```

## 나 혼자 코딩

- 회원 이름순으로 정렬하기

```java
//나 혼자 코딩 => 회원 이름순으로 정렬
@Override
public int compareTo(Member member) {
  return (this.memberName.compareTo(member.memberName));
}
```

## Comparable 인터페이스와 Comparator 인터페이스

- Camparable 인터페이스 : 자기 자신과 전달 받은 매개변수를 비교. 기본 정렬기준을 구현하는데 사용
- Comparator 인터페이스 : 두 매개 변수를 비교. 기본 정렬 기준 외에 다른 기준으로 정렬할 때 사용

- 위의 코드는  Comparable을 사용하였습니다.
- 아래의 코드는 Comparator를 사용하였습니다.

```java
public class Member2 implements Comparator<Member2> {
//Comparator 인터페이스
  @Override
  public int compare(Member2 member1, Member2 member2) {
    return member1.getMemberId() - member2.getMemberId();
  }
}
```

- Comparator를 사용할 때 유의점

  - TreeSet 생성자에 Comparator를 구현한 객체를 매개변수로 전달해야 합니다.

  ```java
  TreeSet<Member> treeSet = new TreeSet<Member>(new member2());
  ```

=> 일반적으로  Comparable 인터페이스를 더 많이 사용합니다.

​	이미 어떤 클래스에서 Comparable를 정의한 경우 Comparator를 사용합니다.

## 중요!! - 정렬순서를 커스텀할 때 이용

```java
package Collection.set.mycompare;

import java.util.Comparator;
import java.util.Set;
import java.util.TreeSet;

class MyCompare implements Comparator<String> {
    @Override
    public int compare(String s1, String s2) {
        return (s1.compareTo(s2)) * -1;
    }
}
public class ComparatorTest {
    public static void main(String[] args) {
        //Comparator를 사용할 때는 매개변수에 객체를 넣어주어야 합니다.
        Set<String> set = new TreeSet<String>(new MyCompare());
        set.add("aaa");
        set.add("bbb");
        set.add("ccc");

        System.out.println(set);
    }

}
/*
[ccc, bbb, aaa]
*/
```

